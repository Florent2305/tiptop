# @configure_input@

package = @PACKAGE_NAME@
version = @PACKAGE_VERSION@
tarname = @PACKAGE_TARNAME@
distdir = $(tarname)-$(version)

prefix      = @prefix@
exec_prefix = @exec_prefix@
bindir      = @bindir@
datarootdir = @datarootdir@
mandir      = @mandir@
man1dir     = $(mandir)/man1

# VPATH-specific substitution variables
srcdir= @srcdir@
VPATH = @srcdir@


CC =       @CC@
LIBS =     @LIBS@
CFLAGS =   @CFLAGS@ -I..
CPPFLAGS = @CPPFLAGS@
INSTALL  = @INSTALL@

OBJS=tiptop.o pmc.o process.o requisite.o conf.o screen.o \
     debug.o version.o helpwin.o options.o hash.o spawn.o \
     xml-parser.o formula-parser.o target.o utils-expression.o


all: tiptop

tiptop: $(OBJS)
	$(CC) -o tiptop $(OBJS) $(LIBS)


Makefile: Makefile.in ../config.status
	cd .. && ./config.status src/$@

../config.status: ../configure
	cd .. && ./config.status --recheck



version.o: version.c
	$(CC) $(CFLAGS) -DCOMPILE_HOST="\""`hostname`"\"" \
                        -DCOMPILE_DATE="\"`date`\"" \
                        -c $(srcdir)/version.c

install:
	$(INSTALL) -d $(DESTDIR)$(bindir)
	$(INSTALL) -m 0755 tiptop $(DESTDIR)$(bindir)
	$(INSTALL) -d $(DESTDIR)$(man1dir)
	$(INSTALL) -m 0644 tiptop.1 $(DESTDIR)$(man1dir)

uninstall:
	-rm $(DESTDIR)$(bindir)/tiptop
	-rm $(DESTDIR)$(man1dir)/tiptop.1

clean:
	/bin/rm -f $(OBJS) tiptop


depend:
	makedepend -Y *.c


.PHONY: all clean depend install uninstall


# DO NOT DELETE

conf.o: conf.h options.h xml-parser.h
formula-parser.o: debug.h formula-parser.h utils-expression.h process.h
formula-parser.o: screen.h options.h
hash.o: hash.h process.h screen.h formula-parser.h options.h
options.o: options.h version.h
pmc.o: pmc.h
process.o: debug.h hash.h process.h screen.h formula-parser.h options.h pmc.h
process.o: spawn.h
requisite.o: pmc.h requisite.h
screen.o: options.h process.h screen.h formula-parser.h utils-expression.h
spawn.o: options.h process.h screen.h formula-parser.h
target-x86.o: screen.h formula-parser.h options.h target.h
tiptop.o: conf.h options.h debug.h helpwin.h pmc.h process.h screen.h
tiptop.o: formula-parser.h requisite.h spawn.h utils-expression.h
utils-expression.o: formula-parser.h process.h screen.h options.h
utils-expression.o: utils-expression.h
version.o: version.h
